{% extends "base.html" %}
{% load static %}
{% block title %}Login{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/login.css' %}">

<form id="login-form" method="post" class="login-form">
  {% csrf_token %}
  <div class="imgcontainer">
    <!-- âœ… External avatar URL that always works -->
    <img src="https://ui-avatars.com/api/?name=User&background=random" 
         alt="Default Picture" 
         class="w-16 h-16 rounded-full mx-auto">
  </div>
  
  <div class="container">
    <label for="id_login"><b>Username or Email</b></label>
    {{ form.login }}

    <label for="id_password"><b>Password</b></label>
    {{ form.password }}

    <button type="submit">Login</button>
    <label>
      <input type="checkbox" name="remember" checked="checked"> Remember me
    </label>
  </div>

  <div class="container" style="background-color:#f1f1f1">
    <button type="button" class="cancelbtn" onclick="window.location.href='/'">Cancel</button>
    <span class="psw">Forgot <a href="{% url 'account_reset_password' %}">password?</a></span>
  </div>
</form>

<!-- Loader Overlay -->
<div id="loader-overlay" class="fixed inset-0 bg-gray-900 bg-opacity-70 flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-500 z-50">
  <div class="w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
</div>

<script>
  document.getElementById("login-form").addEventListener("submit", function () {
    const loader = document.getElementById("loader-overlay");
    loader.classList.remove("opacity-0", "pointer-events-none");
    loader.classList.add("opacity-100");
  });
</script>
{% endblock %}
